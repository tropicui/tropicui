@layer components {
    ul.menu {
        @media (prefers-reduced-motion: no-preference) {
            interpolate-size: allow-keywords;
        }

        /* layout */
        display: flex;
        flex-direction: column;
        padding: --spacing(0);
        /* overflow: hidden; */

        /* animation */
        transition-property: height, visibility;
        transition-duration: var(--tt-duration, var(--default-transition-duration));
        transition-timing-function: var(--tt-ease-out, var(--default-transition-timing-function));

        li {
            display: grid;

            > :where(.btn):is(:focus):not(:focus-visible) {
                svg:last-child {
                    rotate: 180deg;
                }

                & + ul.menu {
                    visibility: visible;
                    height: auto;
                }

                & + ul.sink {
                    margin-block: --spacing(1);
                }
            }

            svg:last-child {
                /* animation */
                transition-property: rotate;
                transition-duration: var(--tt-duration, var(--default-transition-duration));
                transition-timing-function: var(--tt-ease-out, var(--default-transition-timing-function));
            }

            .btn:has(+ ul.menu > li > :where(.btn):is(:focus):not(:focus-visible)) {
                @media (hover: hover) {
                    &:hover + ul.menu {
                        visibility: visible;
                        height: auto;
                    }
                }

                svg:last-child {
                    rotate: 180deg;
                }
            }

            ul.menu {
                /* layout */
                visibility: hidden;
                height: 0;

                @media (hover: hover) {
                    &:hover {
                        visibility: visible;
                        height: auto;
                    }
                }

                li .btn {
                    opacity: 0.7;
                }
            }
        }
    }
}