/*
Modal component styles.

@description Provides a flexible, customizable modal dialog component with various sizes and animations. Supports backdrop interactions, static behavior, and dismissible functionality.

@layer components - Applies styles at the component layer of the CSS cascade.

@property {string} --modal-block - Controls the block (vertical) size of the modal
@property {string} --modal-inline - Controls the inline (horizontal) size of the modal
*/
@layer components {
    .modal {
        /* modifiers */
        --modal-block: --spacing(60);
        --modal-inline: --spacing(120);

        /* layout */
        opacity: 0;

        /* dimensions */
        min-block-size: var(--modal-block);
        inline-size: var(--modal-inline);

        /* colors */
        box-shadow: var(--shadow-high);

        /* animation */
        transition-property: display, opacity, overlay, scale, transform, visibility;
        transition-behavior: allow-discrete;
        transition-duration: var(--tt-duration, var(--default-transition-duration));
        transition-timing-function: var(--tt-ease-out, var(--default-transition-timing-function));

        @starting-style {
            &:open {
                opacity: 0;
                scale: 80%;
            }
        }
        &:open {
            opacity: 1;
            button:focus-visible {
                background-color: inherit;
            }
        }
        &::backdrop {
            background-color: transparent;

            /* animation */
            transition-property: display, overlay, background-color;
            transition-behavior: allow-discrete;
            transition-duration: var(--tt-duration, var(--default-transition-duration));
            transition-timing-function: var(--tt-ease-out, var(--default-transition-timing-function));
        }
        &:open::backdrop {
            background-color: color-mix(in oklab, var(--color-black) 25%, transparent);
        }

        @starting-style {
            &:open::backdrop {
                background-color: transparent;
            }
        }

        .card-body {
            min-block-size: calc(var(--modal-block) - var(--card-header-size) - var(--card-footer-size));
        }

        /* action outside of modal */
        .modal-static,
        .modal-dismiss-backdrop {
            display: grid;
            position: fixed;
            inset-block-start: 0;
            inset-inline-start: 0;
            block-size: 100%;
            inline-size: 100%;
            opacity: 0;
            z-index: -1;
        }
        &:has(.modal-static:active) {
            scale: 105%;
        }
    }

    /* center content */
    .modal-center {
        align-content: center;
        justify-items: center;
    }

    /* sizes */
    .modal-sm {
        --modal-block: --spacing(48);
        --modal-inline: --spacing(96);
    }
    .modal-lg {
        --modal-block: --spacing(84);
        --modal-inline: --spacing(168);
    }
    .modal-xl {
        --modal-block: --spacing(120);
        --modal-inline: --spacing(240);
    }
    .modal-focus {
        block-size: 100%;
        inline-size: 100%;
        margin-block: --spacing(4);
    }
}