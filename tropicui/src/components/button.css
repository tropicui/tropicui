@layer components {
    .btn {
        /* layout */
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: --spacing(2);

        /* dimensions */
        block-size: var(--btn-size);
        min-inline-size: var(--btn-size);
        padding-inline: calc(var(--btn-size) / 2.5);

        /* text */
        overflow: hidden;
        text-wrap: nowrap;
        text-decoration: none;

        /* colors */
        border-width: var(--btn-border-width, 1px);
        border-style: var(--btn-border-style, solid);
        border-color: var(--btn-border, color-mix(in oklab, var(--btn-color, var(--color-base-border)), var(--color-black) 6%));
        border-radius: var(--btn-radius, var(--radius-control));
        outline: 0px solid var(--btn-focus-outline, var(--color-accent));
        outline-offset: 1px;
        background-color: var(--btn-bg);
        box-shadow:
            var(--btn-shadow, var(--shadow-low))
            ,inset 0 1px 0 0 color-mix(in oklab, var(--color-white) 25%, transparent)
            ;
        color: var(--btn-fg);

        /* animation */
        transition-property: background-color, border-color, box-shadow, color;
        transition-duration: var(--tt-duration, var(--default-transition-duration));
        transition-timing-function: var(--tt-ease-out, var(--default-transition-timing-function));

        /* modifiers */
        --btn-bg: var(--btn-color, var(--color-base));
        --btn-fg: var(--color-base-content);
        --btn-highlight: var(--color-white);
        --btn-size: --spacing(10);

        /* states */
        @media (hover: hover) {
            &:hover {
                --btn-bg: color-mix(in oklab, var(--btn-color, var(--color-base)), var(--color-black) 5%);
            }
        }

        &:focus-visible {
            outline-width: 2px;
        }

        &:is(:active, .btn-active) {
            --btn-bg: color-mix(in oklab, var(--btn-color, var(--color-base)), var(--color-black) 12%);
            --btn-shadow: none;
        }

        &:is(:disabled, [disabled], .btn-disabled) {
            pointer-events: none;
            color: color-mix(in oklab, var(--btn-fg, var(--color-base-content)), var(--color-white) 35%);
            --btn-bg: color-mix(in oklab, var(--btn-color, var(--color-base)), var(--color-white) 25%);
            --btn-border: color-mix(in oklab, var(--btn-color, var(--color-base)), var(--color-white) 25%);
        }

        /* highlight selected tab button */
        &:has(input:checked):not(:hover) {
            --btn-bg: var(--btn-highlight);
        }
    }
    .btn-icon {
        padding-inline: 0;
    }

    /* colors */
    .btn-primary {
        --btn-color: var(--color-primary);
        --btn-fg: var(--color-primary-content);
    }

    .btn-accent {
        --btn-color: var(--color-accent);
        --btn-fg: var(--color-accent-content);
    }

    .btn-danger {
        --btn-color: var(--color-danger);
        --btn-fg: var(--color-danger-content);
    }

    .btn-warning {
        --btn-color: var(--color-warning);
        --btn-fg: var(--color-warning-content);
    }

    .btn-success {
        --btn-color: var(--color-success);
        --btn-fg: var(--color-success-content);
    }

    /* variants */
    .btn-pill {
        --btn-radius: calc(infinity * 1px);
    }

    .btn-round {
        inline-size: var(--btn-size);
        --btn-radius: calc(infinity * 1px);
    }

    .btn-link {
        --btn-size: fit-content;
        --btn-bg: none;
        --btn-fg: var(--btn-color, var(--color-base-content));
        --btn-border: transparent;
        --btn-shadow: none;

        @media (hover: hover) {
            &:hover {
                --btn-bg: none;
                --btn-fg: color-mix(in oklab, var(--btn-color, var(--color-base-content)), var(--color-black) 10%);
                text-decoration: underline;
            }
        }
        &:is(:active, .btn-active) {
            --btn-bg: none;
            --btn-fg: color-mix(in oklab, var(--btn-color, var(--color-base-content)), var(--color-black) 30%);
            text-decoration: underline;
        }
        &:is(:disabled, [disabled], .btn-disabled) {
            --btn-bg: none;
            --btn-border: transparent;
        }
    }

    .btn-clear {
        --btn-bg: none;
        --btn-fg: var(--btn-color, var(--color-base-content));
        --btn-border: transparent;
        --btn-shadow: none;
        @media (hover: hover) {
            &:hover {
                --btn-bg: color-mix(in oklab, var(--btn-color, var(--color-base)) 10%, var(--color-white));
            }
        }
        &:is(:active, .btn-active) {
            --btn-bg: color-mix(in oklab, var(--btn-color, var(--color-base)) 25%, var(--color-white));
        }
        &:is(:disabled, [disabled], .btn-disabled) {
            --btn-bg: none;
            --btn-border: transparent;
        }
    }

    .btn-soft {
        --btn-border: transparent;
        &:not(:hover, :active, .btn-active) {
            --btn-bg: color-mix(in oklab, var(--btn-color, var(--color-base)) 10%, var(--color-white));
            --btn-fg: var(--btn-color, var(--color-base-content));
            --btn-shadow: none;
        }
        @media (hover: none) {
            &:not(:active, .btn-active) {
                --btn-bg: color-mix(in oklab, var(--btn-color, var(--color-base)) 10%, var(--color-white));
                --btn-fg: var(--btn-color, var(--color-base-content));
                --btn-shadow: none;
            }
        }
        &:is(:disabled, [disabled], .btn-disabled) {
            --btn-bg: color-mix(in oklab, var(--btn-color, var(--color-base)) 6%, var(--color-white));
            --btn-border: transparent;
        }
    }

    .btn-outline,
    .btn-outline-bold,
    .btn-dashed,
    .btn-dashed-bold {
        &:not(:hover, :active, .btn-active) {
            --btn-bg: none;
            --btn-fg: var(--btn-color, var(--color-base-content));
        }
        @media (hover: none) {
            &:not(:active, .btn-active) {
                --btn-bg: none;
                --btn-fg: var(--btn-color, var(--color-base-content));
            }
        }
    }

    .btn-outline-bold,
    .btn-dashed-bold {
        --btn-shadow: none;
        --btn-border-width: 2px;
    }

    .btn-dashed,
    .btn-dashed-bold {
        --btn-border-style: dashed;
        @media (hover: hover) {
            &:hover {
                --btn-border: transparent;
            }
        }
        &:is(:active, .btn-active) {
            --btn-border: transparent;
        }
    }

    /* sizes */
    .btn-xs {
        --btn-size: --spacing(6);
        font-size: var(--text-xs);
        line-height: var(--text-xs--line-height);
    }
    .btn-sm {
        --btn-size: --spacing(8);
        font-size: var(--text-sm);
        line-height: var(--text-sm--line-height);
    }
    .btn-lg {
        --btn-size: --spacing(11);
        font-size: var(--text-lg);
        line-height: var(--text-lg--line-height);
    }
    .btn-xl {
        --btn-size: --spacing(13);
        font-size: var(--text-xl);
        line-height: var(--text-xl--line-height);
    }
    .btn-2xl {
        --btn-size: --spacing(15);
        font-size: var(--text-2xl);
        line-height: var(--text-2xl--line-height);
    }
    .btn-wide {
        min-inline-size: --spacing(64);
    }
    .btn-block {
        inline-size: 100%;
    }

    svg, img, i {
        .btn & {
            block-size: 1.25em;
            min-inline-size: 1.25em;
        }
    }
}